<!DOCTYPE html>
                <html lang="fr" {{if .DarkMode}}class="dark" {{end}}>
                <head>
                    <meta charset="UTF-8"/>
                    <meta name="viewport" content="width=device-width, initial-scale=1"/>
                    <title>PhrasInachev - Le forum des phrases</title>
                    <!-- Google Fonts - Roboto Condensed -->
                    <link rel="preconnect" href="https://fonts.googleapis.com">
                    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400;500;600;700&display=swap"
                          rel="stylesheet">
                    <!-- CDN Tailwind -->
                    <script src="https://cdn.tailwindcss.com"></script>
                    <script src="/static/js/tailwind.config.js"></script>

                    <!-- Ajout de Flaticon -->
                    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css">
                    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-brands/css/uicons-brands.css">
                    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-solid-rounded/css/uicons-solid-rounded.css">

                </head>
                <body class="bg-gray-100 text-gray-800 dark:bg-dark-bg dark:text-gray-200 font-sans transition-colors duration-200">

                {{template "header" .}}

                <!-- Main section -->
                <main class="max-w-6xl mx-auto p-4">
                    <h1 class="text-2xl font-bold text-primary dark:text-light mb-6">Bienvenue sur PhrasInachev</h1>

                    <!-- Introduction -->
                    <div class="bg-white dark:bg-dark-surface rounded-lg shadow-md p-6 mb-8 transition-colors duration-200">
                        <h2 class="text-xl font-semibold text-primary dark:text-light mb-3">Le forum où on ne finit jamais nos...</h2>
                        <p class="text-gray-600 dark:text-gray-300 mb-4">
                            Bienvenue sur PhrasInachev, le forum dédié aux phrases que l'on n'achève jamais. Partagez vos histoires incomplètes, vos pensées suspendues et vos réflexions interrompues.
                        </p>

                        <div class="flex justify-between items-center">
                            <a href="/categories" class="bg-secondary hover:bg-opacity-90 dark:bg-dark-secondary text-white py-2 px-4 rounded-md transition-colors">
                                Parcourir les catégories
                            </a>

                            {{if .User}}
                            <a href="/createPost" class="bg-accent hover:bg-opacity-90 dark:bg-dark-accent text-white py-2 px-4 rounded-md transition-colors">
                                Créer un nouveau post
                            </a>
                            {{else}}
                            <a href="/auth" class="bg-primary hover:bg-opacity-90 dark:bg-dark-primary text-white py-2 px-4 rounded-md transition-colors">
                                Se connecter pour participer
                            </a>
                            {{end}}
                        </div>
                    </div>

                    <!-- Recent posts -->
                    <div class="mb-8">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold text-primary dark:text-light">Publications récentes</h2>
                            <a href="/categories" class="text-accent dark:text-dark-accent hover:underline">Voir toutes les catégories</a>
                        </div>

                        {{if .Posts}}
                            {{range .Posts}}
                            <!-- Post -->
                            <div class="bg-white dark:bg-dark-surface rounded-xl shadow-md overflow-hidden transition-colors duration-200 mb-4">
                                <div class="p-6">
                                    <div class="flex items-center justify-between mb-4">
                                        <div class="flex items-center">
                                            <div class="h-10 w-10 rounded-full bg-pale dark:bg-dark-pale flex items-center justify-center text-primary dark:text-white font-bold">
                                                {{index .Username 0 | printf "%c"}}
                                            </div>
                                            <div class="ml-3">
                                                <p class="font-medium text-gray-800 dark:text-gray-200">{{.Username}}</p>
                                                <p class="text-sm text-gray-500 dark:text-gray-400">{{.CreatedAt}}</p>
                                            </div>
                                        </div>
                                        <div class="px-3 py-1 bg-secondary/10 dark:bg-dark-secondary/20 rounded-full text-secondary dark:text-light text-sm">
                                            {{range .Categories}}
                                                {{.}}
                                            {{end}}
                                        </div>
                                    </div>
                                    <h3 class="text-xl font-semibold text-primary dark:text-light mb-2">{{.Title}}</h3>
                                    <p class="text-gray-600 dark:text-gray-300 mb-4">{{.Content}}</p>
                                    <div class="flex justify-between items-center">
                                        <div class="flex space-x-4 text-gray-500 dark:text-gray-400">
                                            <span class="flex items-center gap-1">
                                                <i class="fi fi-rr-heart w-5 h-5"></i>{{.Likes}}
                                            </span>
                                            <span class="flex items-center gap-1">
                                                <i class="fi fi-rr-thumbs-down w-5 h-5"></i>{{.Dislikes}}
                                            </span>
                                            <span class="flex items-center gap-1">
                                                <i class="fi fi-rr-comment w-5 h-5"></i>{{.CommentCount}}
                                            </span>
                                        </div>
                                        <a href="/post?id={{.Id}}" class="text-secondary dark:text-accent hover:underline">Voir plus</a>
                                    </div>
                                </div>
                            </div>
                            {{end}}
                        {{else}}
                            <div class="bg-white dark:bg-dark-surface rounded-lg shadow-md p-8 text-center">
                                <p class="text-gray-600 dark:text-gray-400">Aucune publication pour le moment...</p>
                                {{if .User}}
                                <a href="/createPost" class="mt-4 inline-block px-4 py-2 bg-accent text-white dark:bg-dark-accent rounded-md hover:bg-opacity-90 transition-colors">
                                    Créer le premier post
                                </a>
                                {{end}}
                            </div>
                        {{end}}
                    </div>

                    <!-- Categories -->
                    <div class="mb-8">
                        <h2 class="text-xl font-bold text-primary dark:text-light mb-4">Catégories populaires</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            {{if .AllCategories}}
                                {{range .AllCategories}}
                                <a href="/categories" class="bg-white dark:bg-dark-surface rounded-lg shadow-md p-4 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-opacity-90 transition-colors duration-200">
                                    <span class="font-medium text-primary dark:text-light">{{.}}</span>
                                    <i class="fi fi-rr-angle-right text-gray-400"></i>
                                </a>
                                {{end}}
                            {{else}}
                                <div class="col-span-3 bg-white dark:bg-dark-surface rounded-lg shadow-md p-6 text-center">
                                    <p class="text-gray-600 dark:text-gray-400">Aucune catégorie disponible pour le moment</p>
                                </div>
                            {{end}}
                        </div>
                    </div>

                    {{if .User}}
                    <!-- Quick post form -->
                    <div class="bg-white dark:bg-dark-surface rounded-lg shadow-md p-6 transition-colors duration-200">
                        <h2 class="text-lg font-semibold mb-4 text-primary dark:text-light">Commencer une nouvelle phrase</h2>
                        <form action="/createPost" method="POST">
                            <div class="mb-4">
                                <input type="text" name="title" placeholder="Titre de votre message inachevé..." class="w-full p-3 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-accent dark:bg-dark-surface dark:text-gray-200">
                            </div>
                            <div class="mb-4">
                                <textarea name="content" rows="3" placeholder="Commencez une phrase que vous n'allez pas..." class="w-full p-3 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-accent dark:bg-dark-surface dark:text-gray-200"></textarea>
                            </div>
                            <div class="flex justify-end">
                                <button type="submit" class="bg-accent hover:bg-secondary dark:bg-dark-accent dark:hover:bg-dark-secondary text-white font-medium py-2 px-6 rounded transition-colors">
                                    Publier
                                </button>
                            </div>
                        </form>
                    </div>
                    {{end}}
                </main>

                <!-- Footer -->
                <footer class="bg-primary dark:bg-dark-primary text-gray-300 py-6 mt-12">
                    <div class="max-w-6xl mx-auto px-4">
                        <div class="flex flex-col md:flex-row justify-between">
                            <div class="mb-4 md:mb-0">
                                <h3 class="text-lg font-semibold mb-2 text-pale dark:text-dark-pale">PhrasInachev</h3>
                                <p class="text-sm">Le forum où on ne finit jamais nos phrases...</p>
                            </div>
                            <div class="text-sm">
                                <div>&copy; 2025 PhrasInachev. Tous droits réservés.</div>
                                <div class="mt-2">
                                    <a href="/mentions-legales" class="hover:text-white">Mentions légales</a> |
                                    <a href="/confidentialite" class="hover:text-white">Politique de confidentialité</a>
                                </div>
                            </div>
                        </div>
                        {{if .User}}
                        <div class="mt-4 text-xs text-center text-gray-400">
                            Connecté en tant que {{.User.Name}} | <a href="/logout" class="hover:text-white">Déconnexion</a>
                        </div>
                        {{end}}
                        <div class="mt-4 text-xs text-center">
                            <a href="https://github.com/zoom26042604" class="text-gray-400 hover:text-white flex items-center justify-center">
                                <i class="fi fi-brands-github mr-1"></i> GitHub
                            </a>
                        </div>
                    </div>
                </footer>

                </body>
                </html>